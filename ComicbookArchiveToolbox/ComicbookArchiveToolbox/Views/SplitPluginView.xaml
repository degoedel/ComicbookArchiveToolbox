<UserControl x:Class="ComicbookArchiveToolbox.Module.Split.Views.SplitPluginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:converters="clr-namespace:ComicbookArchiveToolbox.CommonTools"
             xmlns:local="clr-namespace:ComicbookArchiveToolbox.Module.Split.Views"
             xmlns:prism="http://prismlibrary.com/"
             xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
             xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
             prism:ViewModelLocator.AutoWireViewModel="True"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800">

	<UserControl.Resources>
		<converters:InverseBooleanConverter x:Key="InverseConverter"/>
	</UserControl.Resources>

	<ScrollViewer>
		<StackPanel Margin="24">
			<!-- Modern Header -->
			<StackPanel Orientation="Horizontal" Margin="0,0,0,32">
				<iconPacks:PackIconPhosphorIcons Kind="ArrowsSplitBold" 
                                          Width="32" 
                                          Height="32" 
                                          Foreground="{DynamicResource MahApps.Brushes.Text}"
                                          VerticalAlignment="Center"
                                          Margin="0,0,16,0"/>
				<TextBlock Text="Split File" 
                           Style="{DynamicResource MahApps.Styles.TextBlock.Title}"
                           FontSize="28"
                           VerticalAlignment="Center"/>
			</StackPanel>

			<!-- File Selection Card -->
			<Border Style="{StaticResource ModernCard}">
				<StackPanel>
					<TextBlock Text="File Selection" 
                               Style="{DynamicResource MahApps.Styles.TextBlock.SubHeader}"
                               Margin="0,0,0,16"/>

					<mah:MetroHeader Header="File To Split">
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="Auto"/>
							</Grid.ColumnDefinitions>
							<TextBox Grid.Column="0" 
                                     Text="{Binding FileToSplit, Mode=TwoWay}"
                                     Style="{StaticResource MahApps.Styles.TextBox}"
                                     Margin="0,0,8,0"/>
							<Button Grid.Column="1" 
                                    Content="Browse..."
                                    Style="{StaticResource MahApps.Styles.Button.Square}"
                                    Command="{Binding BrowseFileCommand}"/>
						</Grid>
					</mah:MetroHeader>

					<mah:MetroHeader Header="Output Files Template" Margin="0,16,0,0">
						<TextBox Text="{Binding NameTemplate, Mode=TwoWay}"
                                 Style="{StaticResource MahApps.Styles.TextBox}"/>
					</mah:MetroHeader>
				</StackPanel>
			</Border>

			<!-- Split Configuration Card -->
			<Border Style="{StaticResource ModernCard}">
				<StackPanel>
					<TextBlock Text="Split Configuration" 
                               Style="{DynamicResource MahApps.Styles.TextBlock.SubHeader}"
                               Margin="0,0,0,16"/>

					<mah:MetroHeader Header="Split Style">
						<ComboBox ItemsSource="{Binding SplitStyles}" 
                                  SelectedItem="{Binding SelectedStyle}"
                                  Style="{StaticResource MahApps.Styles.ComboBox}"
                                  Width="200"
                                  HorizontalAlignment="Left"/>
					</mah:MetroHeader>

					<!-- Split Arguments Region -->
					<Border Background="{DynamicResource MahApps.Brushes.Gray1}"
                            BorderBrush="{DynamicResource MahApps.Brushes.Gray4}"
                            BorderThickness="1"
                            CornerRadius="4"
                            Margin="0,16,0,0"
                            Padding="12">
						<ContentControl prism:RegionManager.RegionName="SplitArgsRegion"/>
					</Border>
				</StackPanel>
			</Border>

			<!-- Output Settings Card -->
			<Border Style="{StaticResource ModernCard}">
				<StackPanel>
					<TextBlock Text="Output Settings" 
                               Style="{DynamicResource MahApps.Styles.TextBlock.SubHeader}"
                               Margin="0,0,0,16"/>

					<!-- Path Options -->
					<CheckBox Content="Follow source file location" 
                              IsEnabled="{Binding FileSelected}" 
                              IsChecked="{Binding FollowFilePath, Mode=TwoWay}"
                              Style="{StaticResource MahApps.Styles.CheckBox}"
                              FontSize="14"
                              Margin="0,0,0,16"/>

					<!-- Image Quality and Output Path -->
					<Grid>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="*"/>
							<ColumnDefinition Width="16"/>
							<ColumnDefinition Width="*"/>
						</Grid.ColumnDefinitions>

						<!-- Image Quality -->
						<mah:MetroHeader Grid.Column="0" Header="Image Quality (%)">
							<mah:NumericUpDown Value="{Binding ImageQuality, Mode=TwoWay}"
                                               Minimum="1"
                                               Maximum="100"
                                               Width="120"
                                               HorizontalAlignment="Left"/>
						</mah:MetroHeader>

						<!-- Output Directory -->
						<mah:MetroHeader Grid.Column="2" 
                                         Header="Output Directory"
                                         IsEnabled="{Binding FollowFilePath, Converter={StaticResource InverseConverter}}">
							<Grid>
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="*"/>
									<ColumnDefinition Width="Auto"/>
								</Grid.ColumnDefinitions>
								<TextBox Grid.Column="0" 
                                         Text="{Binding OutputDir, Mode=TwoWay}"
                                         Style="{StaticResource MahApps.Styles.TextBox}"
                                         Margin="0,0,8,0"/>
								<Button Grid.Column="1" 
                                        Content="Browse..."
                                        Style="{StaticResource MahApps.Styles.Button.Square}"
                                        Command="{Binding BrowseOutputDirCommand}"/>
							</Grid>
						</mah:MetroHeader>
					</Grid>
				</StackPanel>
			</Border>

			<!-- Action Button -->
			<StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
				<Button Content="Start Split" 
                        Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                        Command="{Binding SplitCommand}"
                        Width="160"
                        Height="40">
					<Button.ContentTemplate>
						<DataTemplate>
							<StackPanel Orientation="Horizontal">
								<iconPacks:PackIconPhosphorIcons Kind="ArrowsMergeBold" Width="16" Height="16" Margin="0,0,8,0"/>
								<TextBlock Text="{Binding}"/>
							</StackPanel>
						</DataTemplate>
					</Button.ContentTemplate>
				</Button>
			</StackPanel>
		</StackPanel>
	</ScrollViewer>
</UserControl>