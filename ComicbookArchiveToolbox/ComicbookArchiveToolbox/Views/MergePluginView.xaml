<UserControl x:Class="ComicbookArchiveToolbox.Module.Merge.Views.MergePluginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ComicbookArchiveToolbox.Module.Merge.Views"
             xmlns:prism="http://prismlibrary.com/"
             xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
             xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
             prism:ViewModelLocator.AutoWireViewModel="True"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
	<UserControl.Resources>
		<Style x:Key="ItemContStyle" TargetType="ListViewItem">
			<Style.Resources>
				<LinearGradientBrush x:Key="MouseOverBrush" StartPoint="0.5, 0" EndPoint="0.5, 1">
					<GradientStop Color="#22000000" Offset="0" />
					<GradientStop Color="#44000000" Offset="0.4" />
					<GradientStop Color="#55000000" Offset="0.6" />
					<GradientStop Color="#33000000" Offset="0.9" />
					<GradientStop Color="#22000000" Offset="1" />
				</LinearGradientBrush>
			</Style.Resources>
			<Setter Property="Padding" Value="0,4" />
			<Setter Property="HorizontalContentAlignment" Value="Stretch" />
			<!-- The default control template for ListViewItem has a Border 
           which contains the item's content. -->
			<Setter Property="Border.BorderThickness" Value="0,0,0,0.5" />
			<Setter Property="Border.BorderBrush" Value="LightGray" />
			<!-- These triggers react to changes in the attached properties set
           during a managed drag-drop operation. -->
			<Style.Triggers>
				<Trigger Property="local:ListViewItemDragState.IsBeingDragged" Value="True">
					<Setter Property="FontWeight" Value="DemiBold" />
				</Trigger>
				<Trigger Property="local:ListViewItemDragState.IsUnderDragCursor" Value="True">
					<Setter Property="Background" Value="{StaticResource MouseOverBrush}" />
				</Trigger>
			</Style.Triggers>
		</Style>
	</UserControl.Resources>

	<ScrollViewer>
		<StackPanel Margin="24">
			<!-- Modern Header -->
			<StackPanel Orientation="Horizontal" Margin="0,0,0,32">
				<iconPacks:PackIconModern Kind="Paperclip" 
                                          Width="32" 
                                          Height="32" 
                                          Foreground="{DynamicResource MahApps.Brushes.Text}"
                                          VerticalAlignment="Center"
                                          Margin="0,0,16,0"/>
				<TextBlock Text="Merge Files" 
                           Style="{DynamicResource MahApps.Styles.TextBlock.Title}"
                           FontSize="28"
                           VerticalAlignment="Center"/>
			</StackPanel>

			<!-- File Selection Card -->
			<Border Style="{StaticResource ModernCard}">
				<StackPanel>
					<TextBlock Text="Files" 
                               Style="{DynamicResource MahApps.Styles.TextBlock.SubHeader}"
                               Margin="0,0,0,16"/>

					<mah:MetroHeader Header="Input Files">
						<StackPanel>
							<StackPanel Orientation="Horizontal" Margin="0,0,0,8">
								<Button Content="Select Files..."
                                        Style="{StaticResource MahApps.Styles.Button.Square}"
                                        Command="{Binding BrowseFilesCommand}"
                                        Margin="0,0,8,0"/>
								<Button Content="Clear Selection"
                                        Style="{StaticResource MahApps.Styles.Button.Square}"
                                        Command="{Binding ClearFilesCommand}"/>
							</StackPanel>
							<ListView ItemsSource="{Binding SelectedFiles}" 
                                      MaxHeight="200" 
                                      ItemContainerStyle="{StaticResource ItemContStyle}" 
                                      SelectionMode="Single" 
                                      Name="_filesListView"
                                      Style="{StaticResource MahApps.Styles.ListView}"/>
						</StackPanel>
					</mah:MetroHeader>

					<mah:MetroHeader Header="Output File" Margin="0,16,0,0">
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="Auto"/>
							</Grid.ColumnDefinitions>
							<TextBox Grid.Column="0" 
                                     Text="{Binding OutputFile, Mode=TwoWay}"
                                     Style="{StaticResource MahApps.Styles.TextBox}"
                                     Margin="0,0,8,0"/>
							<Button Grid.Column="1" 
                                    Content="Browse..."
                                    Style="{StaticResource MahApps.Styles.Button.Square}"
                                    Command="{Binding BrowseOutputFileCommand}"/>
						</Grid>
					</mah:MetroHeader>
				</StackPanel>
			</Border>

			<!-- Compression Quality Card -->
			<Border Style="{StaticResource ModernCard}">
				<StackPanel Orientation="Horizontal">
					<TextBlock Text="Image Quality (%)" 
                               VerticalAlignment="Center"
                               Style="{DynamicResource MahApps.Styles.TextBlock.SubHeader}"
                               Margin="0,0,16,0"/>
					<mah:NumericUpDown Value="{Binding ImageQuality, Mode=TwoWay}"
                                       Minimum="1"
                                       Maximum="100"
                                       Width="80"/>
				</StackPanel>
			</Border>

			<!-- Action Button -->
			<StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
				<Button Content="Start Merge" 
                        Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                        Command="{Binding MergeCommand}"
                        Width="160"
                        Height="40">
					<Button.ContentTemplate>
						<DataTemplate>
							<StackPanel Orientation="Horizontal">
								<iconPacks:PackIconModern Kind="Paperclip" Width="16" Height="16" Margin="0,0,8,0"/>
								<TextBlock Text="{Binding}"/>
							</StackPanel>
						</DataTemplate>
					</Button.ContentTemplate>
				</Button>
			</StackPanel>
		</StackPanel>
	</ScrollViewer>
</UserControl>