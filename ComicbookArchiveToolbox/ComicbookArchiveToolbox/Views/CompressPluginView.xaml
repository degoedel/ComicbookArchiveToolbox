<UserControl x:Class="ComicbookArchiveToolbox.Views.CompressPluginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:converters="clr-namespace:ComicbookArchiveToolbox.CommonTools"
             xmlns:prism="http://prismlibrary.com/"
             xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
             xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
             prism:ViewModelLocator.AutoWireViewModel="True">
	<UserControl.Resources>
		<converters:InverseBooleanConverter x:Key="InverseBooleanConverter"/>
		<converters:BooleanToTextConverter x:Key="BooleanToTextConverter"/>
	</UserControl.Resources>

	<ScrollViewer>
		<StackPanel Margin="24">
			<!-- Modern Header -->
			<StackPanel Orientation="Horizontal" Margin="0,0,0,32">
				<iconPacks:PackIconModern Kind="Archive" 
                                          Width="32" 
                                          Height="32" 
                                          Foreground="{DynamicResource MahApps.Brushes.Text}"
                                          VerticalAlignment="Center"
                                          Margin="0,0,16,0"/>
				<TextBlock Text="Compress Pictures" 
                           Style="{DynamicResource MahApps.Styles.TextBlock.Title}"
                           FontSize="28"
                           VerticalAlignment="Center"/>
			</StackPanel>

			<!-- File Selection Card -->
			<Border Style="{StaticResource ModernCard}">
				<StackPanel>
					<TextBlock Text="Files" 
                               Style="{DynamicResource MahApps.Styles.TextBlock.SubHeader}"
                               Margin="0,0,0,16"/>

					<StackPanel Orientation="Horizontal">
						<mah:ToggleSwitch Header="Processing Mode"
						                  IsOn="{Binding IsBatchMode}"
						                  OnContent="Batch"
						                  OffContent="Single file"
						                  Style="{StaticResource MahApps.Styles.ToggleSwitch}"
						                  Width="200"/>
					</StackPanel>

					<mah:MetroHeader Header="{Binding IsBatchMode, Converter={StaticResource BooleanToTextConverter}, ConverterParameter='Input Directory|Input File'}">
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="Auto"/>
							</Grid.ColumnDefinitions>
							<TextBox Grid.Column="0" 
                                     Text="{Binding InputPathToCompress}"
                                     Style="{StaticResource MahApps.Styles.TextBox}"
                                     Margin="0,0,8,0"/>
							<Button Grid.Column="1" 
                                    Content="Browse..."
                                    Style="{StaticResource MahApps.Styles.Button.Square}"
                                    Command="{Binding BrowseFileCommand}"/>
						</Grid>
					</mah:MetroHeader>

					<mah:MetroHeader Header="{Binding IsBatchMode, Converter={StaticResource BooleanToTextConverter}, ConverterParameter='Output Directory|Output File'}" Margin="0,16,0,0">
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="Auto"/>
							</Grid.ColumnDefinitions>
							<TextBox Grid.Column="0" 
                                     Text="{Binding OutputPath}"
                                     Style="{StaticResource MahApps.Styles.TextBox}"
                                     Margin="0,0,8,0"/>
							<Button Grid.Column="1" 
                                    Content="Browse..."
                                    Style="{StaticResource MahApps.Styles.Button.Square}"
                                    Command="{Binding BrowseOutputFileCommand}"/>
						</Grid>
					</mah:MetroHeader>
				</StackPanel>
			</Border>

			<!-- Resize Options Card -->
			<Border Style="{StaticResource ModernCard}">
				<StackPanel>
					<TextBlock Text="Resize Options" 
                               Style="{DynamicResource MahApps.Styles.TextBlock.SubHeader}"
                               Margin="0,0,0,16"/>

					<RadioButton Content="Ratio (%)" 
                                 GroupName="ResizeStrategy"
                                 IsChecked="{Binding StrictRatio, Converter={StaticResource InverseBooleanConverter}}"
                                 Style="{StaticResource MahApps.Styles.RadioButton}"
                                 Margin="0,0,0,8"/>
					<mah:NumericUpDown Value="{Binding ImageRatio}"
                                       IsEnabled="{Binding StrictRatio, Converter={StaticResource InverseBooleanConverter}}"
                                       Minimum="1"
                                       Maximum="200"
                                       Width="120"
                                       HorizontalAlignment="Left"
                                       Margin="24,0,0,16"/>

					<RadioButton Content="Strict px Height" 
                                 GroupName="ResizeStrategy"
                                 IsChecked="{Binding StrictRatio}"
                                 Style="{StaticResource MahApps.Styles.RadioButton}"
                                 Margin="0,0,0,8"/>
					<mah:NumericUpDown Value="{Binding ImageHeight}"
                                       IsEnabled="{Binding StrictRatio}"
                                       Minimum="100"
                                       Maximum="4096"
                                       Interval="100"
                                       Width="120"
                                       HorizontalAlignment="Left"
                                       Margin="24,0,0,0"/>
				</StackPanel>
			</Border>

			<!-- Compression Quality Card -->
			<Border Style="{StaticResource ModernCard}">
				<StackPanel Orientation="Horizontal">
					<TextBlock Text="Image Quality (%)" 
                               VerticalAlignment="Center"
                               Style="{DynamicResource MahApps.Styles.TextBlock.SubHeader}"
                               Margin="0,0,16,0"/>
					<mah:NumericUpDown Value="{Binding ImageQuality}"
                                       Minimum="1"
                                       Maximum="100"
                                       Width="80"/>
				</StackPanel>
			</Border>

			<!-- Action Button -->
			<StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
				<Button Content="Start Compression" 
                        Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                        Command="{Binding CompressCommand}"
                        Width="160"
                        Height="40">
					<Button.ContentTemplate>
						<DataTemplate>
							<StackPanel Orientation="Horizontal">
								<iconPacks:PackIconModern Kind="Archive" Width="16" Height="16" Margin="0,0,8,0"/>
								<TextBlock Text="{Binding}"/>
							</StackPanel>
						</DataTemplate>
					</Button.ContentTemplate>
				</Button>
			</StackPanel>
		</StackPanel>
	</ScrollViewer>
</UserControl>