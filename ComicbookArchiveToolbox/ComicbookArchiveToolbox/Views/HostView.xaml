<UserControl x:Class="ComicbookArchiveToolbox.Views.HostView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:prism="http://prismlibrary.com/"
             xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
             xmlns:converters="clr-namespace:ComicbookArchiveToolbox.CommonTools"
             prism:ViewModelLocator.AutoWireViewModel="True">
	<UserControl.Resources>
		<converters:InverseBoolToVisibilityConverter x:Key="InverseVisibilityConverter"/>
	</UserControl.Resources>
	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="70"/>
			<ColumnDefinition Width="*"/>
		</Grid.ColumnDefinitions>

		<!-- Navigation Bar -->
		<Border Grid.Column="0" Background="#222" >
			<StackPanel VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="0,20,0,20">
				<Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Margin="0,8" Height="50" Command="{Binding DisplayCompressCommand}" ToolTip="{Binding ToolCompressDescription}">
					<iconPacks:PackIconModern Kind="Archive" Width="32" Height="32" Foreground="White"/>
				</Button>
				<Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Margin="0,8" Height="50" Command="{Binding DisplaySplitCommand}" ToolTip="{Binding ToolSplitDescription}">
					<iconPacks:PackIconModern Kind="Slice" Width="32" Height="32" Foreground="White"/>
				</Button>
				<Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Margin="0,8" Height="50" Command="{Binding DisplayMergeCommand}" ToolTip="{Binding ToolMergeDescription}">
					<iconPacks:PackIconModern Kind="Paperclip" Width="32" Height="32" Foreground="White"/>
				</Button>
				<Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Margin="0,8" Height="50" Command="{Binding DisplayEditCommand}" ToolTip="{Binding ToolEditDescription}">
					<iconPacks:PackIconModern Kind="PageEdit" Width="32" Height="32" Foreground="White"/>
				</Button>
				<Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Margin="0,8" Height="50" Command="{Binding DisplaySettingsCommand}" ToolTip="{Binding ToolSettingsDescription}">
					<iconPacks:PackIconModern Kind="Cog" Width="32" Height="32" Foreground="White"/>
				</Button>
				<Button Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Margin="0,8" Height="50" Command="{Binding DisplayAboutCommand}" ToolTip="{Binding ToolAboutDescription}">
					<iconPacks:PackIconModern Kind="InformationCircle" Width="32" Height="32" Foreground="White"/>
				</Button>
			</StackPanel>
		</Border>

		<!-- Main Content Area -->
		<Grid Grid.Column="1" >
			<Grid.RowDefinitions>
				<RowDefinition Height="*"/>
				<RowDefinition Height="Auto"/>
			</Grid.RowDefinitions>

			<!-- Content Region -->
			<Border Margin="24" Padding="16" CornerRadius="10" Grid.Row="0" >
				<ContentControl prism:RegionManager.RegionName="PluginRegion"/>
			</Border>

			<!-- Log Panel -->
			<Border Grid.Row="1" Margin="24,0,24,24" Padding="8" CornerRadius="6"
					Visibility="{Binding HideLog, Converter={StaticResource InverseVisibilityConverter}}">
				<StackPanel>
					<DockPanel>
						<TextBlock Text="Log" Foreground="White" FontWeight="Bold" DockPanel.Dock="Left" VerticalAlignment="Center"/>
						<Button Content="✕" Width="24" Height="24" DockPanel.Dock="Right" Command="{Binding HideLogCommand}" ToolTip="Hide log" Margin="4,0,0,0"/>
					</DockPanel>
					<TextBox Text="{Binding CommonLog}" IsReadOnly="True" Margin="0,4,0,0" Foreground="White" BorderThickness="0" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" MinHeight="60"/>
				</StackPanel>
			</Border>

			<!-- Busy Indicator Overlay -->
			<Grid Visibility="{Binding IsBusy, Converter={StaticResource BooleanToVisibilityConverter}}" Grid.RowSpan="2" IsHitTestVisible="True">
                <Viewbox Width="120" Height="120" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <iconPacks:PackIconModern Kind="Progress" Width="100" Height="100" />
                </Viewbox>
			</Grid>
		</Grid>
	</Grid>
</UserControl>